# Hash Table

## Hash Table?

- 해시 테이블은 키를 값에 매핑할 수 있는 구조인, 연관배열추상자료형(ADT)를 구현하는 자료구조
- 해시함수를 구현하여 데이터 값을 해시 값으로 매핑한다.

### Hash

- 해시 함수란 임의 크기 데이터를 고정 크기 값으로 매핑하는데 사용할 수 있는 함수
- 성능 좋은 해시함수의 특징
  - 해시함수값 충돌의 최소화
  - 쉽고 빠른 연산
  - 해시테이블 전체에 해시 값이 균일하게 분포
  - 사용할 키의 모든 정보를 이용하여 해싱
  - 해시테이블 사용효율이 높을 것

## Collision 문제

### Collision 

- 다른 데이터가 같은 해시 값으로 매핑되는 경우 충돌이 발생한다고 한다.
- 충돌은 단순히 생각하는 것보다 쉽게 일어나는 문제이므로 충돌을 최소화하는 일이 중요하다. 
  - 생일 문제
    - 여러 사람이 모였을 때 생일이 같은 사람이 2명이 존재할 확률은?
    - 23명만 모여도 50%가 넘고, 57명이 모이면 그때부터는 99%를 넘는다. 
  - 비둘기집 원리
    - n개 아이템을 m개 컨테이너에 넣을 때, n > m이라면 적어도 하나의 컨테이너에는 반드시 2개 이상의 아이템이 들어있어야 한다는 원리

### Load Factor

- 로드팩터란 해시테이블에 저장된 데이터개수 n을 버킷의 개수 k로 나눈 것이다. 
- 로드 팩터의 비율에 따라 해시 함수를 재작성해야 할지 / 해시테이블의 크기를 조정해야할지를 결정
- 해시 함수가 키들을 잘 분산하는지 판단하는 효율성 척도로 사용된다. 
- 자바10에서는 해시맵의 디폴트 로드팩터를 0.75로 정했음
- 일반적으로 로드팩터가 증가할수록 해시테이블의 성능은 점점 감소한다.

### 충돌문제 해결

- **Separate Chaining(개별 체이닝)** 
  - 연결리스트로 노드를 계속 추가해나가는 방식 (제한 없이 계속 연결 가능, but 메모리 문제)
  - Tree를 이용하는 방식(Red-Black Tree)
- **Open Addressing** : 해시 함수로 얻은 주소가 아닌 다른 주소에 데이터를 저장할 수 있도록 허용 (해당 키 값에 저장되어있으면 다음 주소에 저장)
  - 최악의 경우에는 비어있는 버킷을 찾지 못하고 탐색을 시작한 위치까지 되돌아올 수 있다.
  - 여러 가지 방법 중 3가지.
    - **Linear probing** : 순차적으로 탐색하며 비어있는 버킷을 찾을 때까지 계속 진행된다.
    - **Quadratic probing** : 2차 함수를 이용해 탐색할 위치를 찾는다.
    - **Double hashing probing** : 하나의 해시 함수에서 충돌이 발생하면 2차해시함수를 이용해 새로운 주소를 할당한다. 위 2가지 방법에 비해 많은 연산량을 요구.

> 참고 ) 일반적으로 Open Addressing 은 Separate Chaining 보다 느리다. Open Addressing 의 경우 해시 버킷을 채운 밀도가 높아질수록 Worst Case 발생 빈도가 더 높아지기 때문이다. 반면 Separate Chaining 방식의 경우 해시 충돌이 잘 발생하지 않도록 보조 해시 함수를 통해 조정할 수 있다면 Worst Case 에 가까워 지는 빈도를 줄일 수 있다. 

- **선형 탐사** : 정해진 고정 폭으로 옮겨 해시값의 중복을 피함

- **제곱 탐사** : 정해진 고정 폭을 제곱수로 옮겨 해시값의 중복을 피함

  

## Python에서의 Hash Table 구현

- 파이썬에서의 해시테이블은 딕셔너리로 구현되어있다.
- 파이썬의 해시테이블은 충돌 시 오픈어드레싱을 사용한다. 





### References

- 박상길, 2020, 파이썬 알고리즘 인터뷰, 책만.
- https://github.com/gyoogle/tech-interview-for-developer/blob/master/Computer%20Science/Data%20Structure/Hash.md
- https://github.com/JaeYeopHan/Interview_Question_for_Beginner/tree/master/DataStructure#array-vs-linked-list